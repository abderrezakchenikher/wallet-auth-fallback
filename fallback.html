<script> 
    function openWallet() {
        // Récupérer l'URL de la page avec les paramètres
        const params = new URLSearchParams(window.location.search);
        const oobData = params.get('oob');

        if (!oobData) {
            alert("Données OOB manquantes !");
            return;
        }

        // Construire l'URL DIDComm en remplaçant https par didcomm
        const baseUrl = 'traction-acapy-test.apps.silver.devops.gov.bc.ca';
        const didcommUrl = `didcomm://${baseUrl}?oob=${oobData}`;

        // Essayer d'ouvrir Wallet
        window.location.href = didcommUrl;

        // Si Wallet n'est pas installé, rediriger après 3 secondes
        setTimeout(() => {
            const storeUrl = navigator.userAgent.includes('iPhone') 
                ? 'https://www.quebec.ca/' // Remplace avec l'ID réel de ton app
                : 'https://www.quebec.ca/'; // Remplace avec le package Android
            window.location.href = storeUrl;
        }, 3000);
    }
</script>
