<!DOCTYPE html>
<html lang="fr">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Redirection Wallet</title>
   <script>
       function openWallet() {
           // Récupérer l'URL de la page avec les paramètres
           const params = new URLSearchParams(window.location.search);
           const oobData = params.get('_oob');
           const urlData = params.get('_url');

           if (!oobData && !urlData) {
               alert("Paramètre '_oob' ou '_url' manquant !");
               return;
           }

           // Base de l'URL du wallet
           let httpsUrl = "https://rttdz.wuaze.com/wallet/?";

           // Construction de l'URL selon le paramètre disponible
           if (oobData) {
               httpsUrl += `oob=${encodeURIComponent(oobData)}`;
           } else {
               httpsUrl += `url=${encodeURIComponent(urlData)}`;
           }

           // Redirection vers le wallet
           window.location.href = httpsUrl;

           // Si Wallet n'est pas installé, rediriger après 3 secondes vers un store
           setTimeout(() => {
               const storeUrl = navigator.userAgent.includes('iPhone')
                   ? 'https://www.quebec.ca/' // Remplace par l'URL réelle de l'App Store
                   : 'https://www.quebec.ca/'; // Remplace par l'URL réelle du Play Store

               window.location.href = storeUrl;
           }, 3000);
       }
   </script>
</head>
<body onload="openWallet()">
   <h2>Redirection en cours...</h2>
</body>
</html>
