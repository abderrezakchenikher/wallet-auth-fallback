<!DOCTYPE html>
<html lang="fr">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Redirection Wallet</title>
<script>
   function openWallet() {
       // Récupérer l'URL de la page avec les paramètres
       const params = new URLSearchParams(window.location.search);
       const oobData = params.get('_oob');
       //const baseUrl = params.get('baseUrl'); // Extraction de baseUrl depuis les paramètres
 
       if (!oobData) {
           alert("Données oob ou baseUrl manquantes !");
           return;
       }
      //const baseUrl = window.location.hostname;
       //console.log(baseUrl);
      //const url = 'https://sqin-app-sai-gestion-url-inc-dev.dev.authentification.si.gouv.qc.ca:443/i/436d260b-7291-4f13-85c4-4468a977fb4d';
       // Construire l'URL DIDComm en utilisant baseUrl des paramètres
      //const didcommUrl = `qcwallet://aries_proof-request?_url=aHR0cHM6Ly9zcWluLWFwcC1zYWktZ2VzdGlvbi11cmwtaW5jLWRldi5kZXYuYXV0aGVudGlmaWNhdGlvbi5zaS5nb3V2LnFjLmNhOjQ0My9pLzQzNmQyNjBiLTcyOTEtNGYxMy04NWM0LTQ0NjhhOTc3ZmI0ZA==`;
      const didcommUrl = `https://rttdz.wuaze.com/walle1t/?oob=${oobData}`;
       // Essayer d'ouvrir Wallet
       window.location.href = didcommUrl;
 
       // Si Wallet n'est pas installé, rediriger après 3 secondes
       setTimeout(() => {
           const storeUrl = navigator.userAgent.includes('iPhone')
               ? 'https://www.quebec.ca/' // Remplace avec l'ID réel de ton app
               : 'https://www.quebec.ca/'; // Remplace avec le package Android
           window.location.href = storeUrl;
       }, 3000);
   }
</script>
 
</head>
<body onload="openWallet()">
   <h2>Redirection en cours...</h2>
</body>
</html>
