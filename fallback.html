<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirection Wallet</title>
    <script>
        function openWallet() {
            // Récupérer l'URL de la page avec les paramètres
            const params = new URLSearchParams(window.location.search);
            const oobData = params.get('oob');

            if (!oobData) {
                alert("Données OOB manquantes !");
                return;
            }

            // Construire l'URL DIDComm
            const didcommUrl = `didcomm://traction-acapy-test.apps.silver.devops.gov.bc.ca?oob=${oobData}`;

            // Essayer d'ouvrir Wallet
            window.location.href = didcommUrl;

            // Si Wallet n'est pas installé, rediriger après 3 secondes
            setTimeout(() => {
                const storeUrl = navigator.userAgent.includes('iPhone') 
                    //? 'https://apps.apple.com/ca/app/bc-wallet/id1587380443?l=fr-CA' // Remplace avec l'ID réel de ton app                   
                    //: 'https://play.google.com/store/apps/details?id=ca.bc.gov.BCWallet'; // Remplace avec le package Android
                    ? 'https://www.quebec.ca/' // Remplace avec l'ID réel de ton app
                    : 'https://www.quebec.ca/'; // Remplace avec le package Android
                window.location.href = storeUrl;
            }, 3000);
        }
    </script>
</head>
<body onload="openWallet()">
    <h2>Redirection en cours...</h2>
</body>
</html>
